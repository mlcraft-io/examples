# Интеграция Synmetrix с Observable: Краткое Руководство

Это руководство по интеграции [Synmetrix](https://synmetrix.org) с [Observable](https://observablehq.com/) — ведущей платформой для создания и обмена визуализациями данных. С помощью REST API Synmetrix вы можете легко подключиться к Observable и создавать интерактивные панели мониторинга и отчеты. Встраиваемые визуализации можно распространять по всей организации, что способствует принятию решений на основе данных.

## Начало работы

Прежде чем продолжить, убедитесь, что вы выполнили [Быстрый старт Synmetrix](https://docs.synmetrix.org/docs/quickstart#prerequisite-software).

## Настройка Synmetrix для работы с Observable

### Скопируйте ключ API Synmetrix

1. **Вход в Synmetrix**: Перейдите на сайт [Synmetrix Stack](https://localhost/) и войдите в свой аккаунт. Для демонстрации используйте предоставленные данные начальной установки.
2. **Получение ключа API**: Перейдите в раздел [Исследовать -> REST API](https://docs.synmetrix.org/docs/user-guide/explore#example-api-utilization) и скопируйте оттуда ключ API.
3. Вставьте скопированный ключ API как `ACCESS_TOKEN` в файл `config.js`, который находится в директории `docs`.

### Запуск Observable

Перейдите в корень примера проекта и выполните следующую команду для установки зависимостей:

```bash
yarn install
```

Затем запустите сервер предварительного просмотра:

```bash
yarn dev
```

После этого посетите <http://localhost:3000>, чтобы просмотреть ваш проект.

Для более подробной информации смотрите <https://observablehq.com/framework/getting-started>.

## Структура проекта

Типичный observable-проект выглядит так:

```ini
.
├─ docs
│  ├─ components
│  │  └─ timeline.js           # импортируемый модуль
│  ├─ data
│  │  ├─ launches.csv.js       # загрузчик данных
│  │  └─ events.json           # статический файл данных
│  ├─ example-dashboard.md     # страница
│  ├─ example-report.md        # другая страница
│  └─ index.md                 # главная страница
├─ .gitignore
├─ observablehq.config.ts      # файл конфигурации проекта
├─ package.json
└─ README.md
```

**`docs`** - Это "корневая папка исходников" — где живут ваши исходные файлы. Здесь находятся страницы. Каждая страница — это файл Markdown. Observable Framework использует [маршрутизацию на основе файлов](https://observablehq.com/framework/routing), что означает, что имя файла контролирует, где будет предоставлена страница. Вы можете создать столько страниц, сколько захотите. Используйте папки для организации ваших страниц.

**`docs/index.md`** - Это главная страница вашего сайта. Вы можете иметь столько дополнительных страниц, сколько захотите, но у вас также должна быть главная страница.

**`docs/data`** - Вы можете размещать [загрузчики данных](https://observablehq.com/framework/loaders) или статические файлы данных где угодно в вашем исходном корне, но мы рекомендуем размещать их здесь.

**`docs/components`** - Вы можете размещать общие [модули JavaScript](https://observablehq.com/framework/javascript/imports) где угодно в вашем исходном корне, но мы рекомендуем размещать их здесь. Это помогает вам выносить код из файлов Markdown в модули JavaScript, что упрощает повторное использование кода на разных страницах, написание тестов и использование линтеров, а также обмен кодом с обычными веб-приложениями.

**`observablehq.config.ts`** - Это файл [конфигурации проекта](https://observablehq.com/framework/config), такой как страницы и разделы в боковой навигации, и название проекта.

## Справочник команд

| Команда           | Описание                                              |
| ----------------- | -------------------------------------------------------- |
| `yarn install`            | Установить или переустановить зависимости                        |
| `yarn dev`        | Запустить сервер локального превью                               |
| `yarn build`      | Собрать ваш статический сайт, создав `./dist`              |
| `yarn deploy`     | Развернуть ваш проект в Observable                        |
| `yarn clean`      | Очистить локальный кеш загрузчика данных                        |
| `yarn observable` | Выполнить команды вроде `observable help`                      |


## О загрузчиках данных

Framework Observable использует [загрузчики данных](https://observablehq.com/framework/loaders) для интеграции данных в проекты. Эти загрузчики по сути являются модулями, которые возвращают promise, который после разрешения предоставляет необходимые данные. Этот механизм позволяет использовать различные методы интеграции данных, включая загрузку из файлов, извлечение через API или динамическую генерацию данных.

В папке `data` вашего проекта вы найдете специальные загрузчики данных, предназначенные для получения данных из API Synmetrix. На данный момент у нас есть два основных загрузчика:

- `orders-count-by-status.csv.js`: Этот загрузчик получает данные о `заказах`, классифицированных по `статусу`, напрямую из API Synmetrix. Он в основном используется для генерации карточек с одним значением в рамках фреймворка.
- `orders-count-by-status-and-day.csv.js`: Аналогично, этот загрузчик извлекает данные о `заказах`, но с дополнительным уровнем группировки по `статусу` и `дню`. Данные, полученные этим загрузчиком, идеально подходят для создания гистограмм, которые отображают распределение заказов по статусу и дню.


## Видеоурок

[![](https://img.youtube.com/vi/VcAP4vrL8cY/0.jpg)](https://youtu.be/VcAP4vrL8cY)